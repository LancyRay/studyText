# JavaScript 学习笔记

------

> 笔记顺序 : 变量 => 数据类型 => DOM => 操作符 => 作用域 =>  面向对象

------

## 变量

1. 命名规范
    - 由字母、数字、下划线、$ 组成且开头不能是数字
    - 规则中所说的字母包括ASCII和Unicode字母字符，如汉字，但不推荐使用
    - 区分大小写
    - 不能是关键字和保留字
2. 驼峰命名发
    变量的命名遵守驼峰命名法，首字母小写,第二个单词的首字母大写       
    ```
    var userName
    
    ```

------

## 数据类型
    
    ECMAScript有6种数据类型，包括五种基本数据类型（简单数据类型，值类型）：number数值型 string字符串型 boolean布尔型 undefined 未定义 null空,以及一种复杂数据类型（引用类型）—— Object；
    
1. 数值类型
    
    - 浮点数
        计算浮点数时会丢失精度
        我们通常用整数的计算来表示浮点数的计算
        不要以两个浮点数是否相等作为条件判断的依据（判断范围还是可以的）
    - NaN
        NaN与任何值都不相等
        NaN是数值类型
        NaN不等于自身

    > isNaN( ) 不是有意义的数值返回true（任何不能被转换为数值的值都会导致    isNaN(123);//false
    

2. 字符串类型

    > ECMAScript 中的字符串是不可变的，也就是说，字符串一旦创建，它们的值就不能改变。
要改变某个变量保存的字符串，首先要销毁变量与原字符串的关系，然后再用一个包含新值的字符串填充该变量（重新赋值覆盖）
    
    - 由于字符串有不可变性，在大量拼接字符串的时候会非常消耗内存。
    
    ```
    var str = "hello";
    str = str + "world"
    
    ```
    
3. 布尔类型
    所有类型的值都可以转化成布尔值

    > 会转化成false的值有： 空字符串 数值零NaN undefined null

4. undefined类型
    表示声明但**未赋值的变量**

5. null类型

6. Object类型

复杂数据类型
object对象

------

##类型转换

1. 转换成字符串

- String() 函数
- toString()
- 使用拼接字符串

2. 转换成数值型

- Number() : 可以把任意值转换成数值，若转换的字符串中有一个不是数值的字符，返回NaN
- parseInt() : 专门用于把字符串转化成整数
- parseFloat() : 把字符串转换成浮点数。若解析的内容中只有整数，则解析成整数

3. 转换成布尔型
- Boolean()函数

------
##操作符

1. 一元运算符
- 只能操作一个值的操作符叫一元运算符（`++` `--`）
- 分为前置和后置
- 前置型操作：变量的值在语句被求值之前执行，后置型反之

2. 逻辑运算符
- `&&` 与：必须两个操作数都为true，才为true，有一个为false，则为false
- `||` 或：必须两个操作数都为false，才为false只要有一个操作数为true，则为true。
- `！` 非：逻辑操作符首先会将它的操作数转换为一个布尔值，然后再对其求         反。它只有一个操作数
- `&&` 和 `||` 都采取短路运算，即第一个能决定结果，就不再看第二个了
> 短路操作：返回能够决定结果的操作数

3. 比较运算符
- `<` `<=` `>=` `>`
- `==` `!=` ：相等和不相等
- `===` `！==`：全等和不全等

4. 赋值运算符
- `=` `+=` `-=` `*=` `/=` `%=`

5. 三元运算符
    **表达式1?表达式2：表达式3**
    表达式1为true，返回表达式2；为false，返回表达式3

6. 运算符的优先级

- 运算符从高到低
> 
  1. () 优先级最高
  2. 一元运算符  ++ -- ！
  3. 算数运算符  先 * / % 后 + -
  4. 关系运算符  < <= >= >
  5. 比较运算符  == ！= === ！==
  6. 逻辑运算符  先&& 后|| 
  
7. **break** 和 **continue**
    - break：跳出当前循环，执行循环后的语句
    - continue：跳出当前循环，执行下一次循环
    
---

##1.1 数组
1.1.1 数组的声明
```
//通过构造函数声明（更加通用）
var arr = new Array('a' , 'b' , 'c');

//通过字面量声明（更加简便）
var arr = ['a' , 'b' , 'c'];
```

1.1.2 数组的赋值和取值
```
    //赋值：数组名[索引号] = 值
    arr[0] = 10;
    
    //取值（通过数组名跟索引即可取到对应的值：数组名[索引号]）
    console.log(arr[0]);
```

1.1.3 数组的遍历

- 数组的索引从 **0** 开始
- 往数组中添加新元素，数组的length会增加
- 通过给 arr.length 赋值可以改变数组的长度

通过for循环遍历数组
```
    for( var i = 0; i < arr.length; i++){
        console.log(arr[i]);
    }
```

## 1.2 函数
1.2.1 函数的声明和调用
```
    //函数声明
    function fn() {
        //函数体
    }
    
    //函数调用
    fn();
```

1.2.2 函数的参数
    有参函数的声明
    （声明中的参数只是一个占位符，没有实际的值，是形式参数，即 **形参**）
```
    function fn(a,b,c) {
        //函数体
    }
```
有参函数的调用（调用时传入的参数才是真正的参数，即 **实参**）
```
    fn(1, 2, 3);
```
1.2.3 函数的返回值
在函数中通过 **return** 关键字将要返回的值返回
```
    return 要返回的值;
```

1.2.4 函数的高级概念
 **参数详解**
    在JS中实参的个数和形参的个数可以不一致
    
 **返回值详解**
    函数的返回值是什么，调用这个函数就相当于调用了什么，若没有返回值则为 `undefined`
    
**两种定义方式**
```
    //函数声明
    function fn() {
        //函数体
    }
    
    //函数表达式
    var fn2 = function() {
        //函数体
    }
```

**匿名函数**（即没有名字的函数）
```
    function () {
        //函数体
    }
```

**递归调用**
> 程序调用自身的编程技巧成为 **递归**

**回调函数**

 > 函数也是一种普通的数据类型，因此函数可以被当作参数传递
   被当作参数传递的函数叫做 **回调函数**

## 1.3 对象
> 宏观：对象是对客观事物的抽象，事物的特征用属性表示，行为用方法表示
  微观：对象就是一种数据类型，通过对象可以方便的对 变量 和 函数 进行管理
  
###1.3.1 键值对
    键值对是一种对应关系，通过键能够方便的找到值
    键：值  key:value   k:v 


###1.3.2 对象的声明
```
    //通过构造函数声明
    var obj = new Object();
    
    //通过字面量声明
    var obj = {};
```

> 对象具有属性和方法
属性：用来描述对象的特征，一般是名词 对应变量
方法：用来描述对象的行为，一般是动词 对应函数

### 1.3.3 属性
属性的定义：
> 对象.属性名 = 值

属性的调用：
> 对象.属性名

### 1.3.4 方法
方法的定义：
> 对象.方法名 = function(){ //函数体 }

方法的调用：
> 对象.方法名()


## 1.4 一些概念
### 1.4.1 对象字面量
```
    var o = {
        name:'香茗',
        age :18,
        sayHi : function() {
            console.log('hello,' + this.name);
        }
    }
```

### 1.4.2 访问属性的两种方式
> //点语法：对象.属性名
  //中括号：对象["属性名"]
  
### 1.4.3 遍历的两种方式
    通过for/forin 可以对集合进行有序的遍历
    
```
    for(var k in json) { 语句 }
```
    k变量代表的是json中的各个属性（key）和 var i = 0中i是一个意思

## 1.5 构造函数
 - new Object()
 - new 后面的函数，称为构造函数。
 - object() 构造函数的本质就是一个函数，只不过构造函数的目的是为了创建新对象，为新对象进行初始化（设置对象的属性）
 - 当一个函数被作为构造函数使用时，new关键字会让 **this** 的指向改变，并让其成为当前函数的返回值。

## 1.6 值类型 和 引用类型
 - JavaScript 中的数据类型分为两类：基本类型和复杂类型
 - 基本数据类型（值类型）：直接存储值
   -- number，string，boolean
   -- undefined，null
 - 复杂数据类型（引用类型）：存储引用
   -- object

---

## 内置对象

## 1.1 Array对象

### 1.1.1 转换数组
  **- valueOf()**：返回数组对象本身
  **- toString()**：把数组转换成字符串
  **- join()**：把字符串中的每一项进行拼接
  
### 1.1.2 检测数组
  - arr **instanceof** Array：检测目标是不是一个数组（若返回 true ，说明是数组，返回 false,则不是数组）
  - Array.isArray()：ES5方法，低版本浏览器不兼容

### 1.1.3 增删方法
  **- push()**：从后面推入元素，返回新数组的length
  **- pop()**：从后面删除元素，返回被删除的元素
  **- shift()**：从前面删除元素，返回被删除的元素
  **- unshift()**：从前面添加元素，返回新数组的length
  
### 1.1.4 排序方法
  **-reverse()**：翻转数组
  **-sort()**：数组排序（默认按字符的ascii编码进行排序）
  
### 1.1.5 操作方法
  **concat()**：把参数拼接到当前数组，组成一个新的数组并返回
```
    //语法：
    concat(value1,value2);
    //参数：可以是一个数组，也可以是值
```
  
  **slice()**：复制当前数组的一部分到一个新数组，并返回这个新数组
  
```
    //语法：
    slice(begin[,end]);
    //参数：1.开始位置，参数2.结束位置，可选
```

  **splice()**：用新元素替换旧元素，修改数组的内容
  
```
    //语法：
    slice(start,deleteCount,[items]);
    //参数1：开始位置
    //参数2：删除元素个数
    //参数3：需要替换的数组
```

### 1.1.6 位置方法

**indexOf()**：查找数组中元素第一次出现的位置，若找不到，返回 **-1**
**lastIndexOf()**：从后面开始查找数组中元素出现位置

```
    indexOf(searchElement,[fromIndex])
    //参数1：需要查找的元素
    //参数2：开始查找的位置
```

### 1.1.7 迭代方法
 `every()` `filter()` `forEach()` `map()` `some()`
 
 **forEach()**：对数组进行遍历
 **filter()**：对数组进行过滤，创建并返回一个新数组，包含了所有通过测试的元素
 
### 1.1.8 字符方法
  **charAt()**：获取指定位置处字符
  **charCodeAt()**：获取指定位置处字符的ASCII码
  **str[0]**：ES5，IE8+支持 和 charAt() 等效
  
### 1.1.9 大小写转换
  **to(Locale)UpperCase()**：转换大写
  **to(Locale)LowerCase()**：转换小写
  
### 1.1.10 其他方法
  **trim()**：去除字符串前后的空白（内部空白去不了）
  **split()**：把字符串切割成字符数组
  
## 1.2  Math对象

### 1.2.1 常用属性
 **Math.PI**

```
    console.log(Math.PI);//3.141592653589793
```

### 1.2.2 最大值和最小值
  **Math.max()/Math.min()** ：参数可为多个数值
  
### 1.2.3 取整
  **Math.ceil()**：向上取整，天花板
  **Math.floor()**：向下取整，地板
  **Math.round()**：四舍五入（如果是 .5 的时候，取更大的那个整数）
  
### 1.2.4 随机数
  **Math.random()**：返回 **0-1** 之间的一个随机数，**[0,1)** 能取到0，取不到 1
  
```
    console.log(Math.random());//[0,1)
    console.log(parseInt(Math.random() * 11));//[0-10]
    console.log(parseInt(Math.random() * 81) + 20);//[20-100]
```

### 1.2.5 绝对值
  **Math.abs()**：取绝对值

### 1.2.6 次幂与平方
  **Math.pow(num,power)**：求 num 的 power 次幂
  **Math.sqrt(num)**：对 num 开平方
  
## 1.3 Date对象
    Date对象用来处理日期和时间
### 1.3.1 创建一个日期对象
```
    //使用构造函数创建一个日期对象
    var date = new Date();//不传参数代表当前时间
    //创建一个指定的日期
    var date = new Date(2005,10,1); //2005.9.1 （月份从 0 开始）
    var date = new Date("2016-07-25"); 
    var date = new Date("2016-07-25 10:14:09:991");
```

### 1.3.2 日期格式化

 - 日期转换成字符串：
```
    var date = new Date();
    console.log(date.toString());//直接打印date，默认调用toString方法
    console.log(date.toLocaleString());
```

 - 日期转换成毫秒值
```
var date = new Date();
console.log(+date);//将日期转换成毫秒值（最通用）
console.log(date.valueOf());//将日期转换成毫秒值
console.log(Date.now());//将当前日期转换成毫秒值，H5方法，IE678不兼容
console.log(Date.parse("2015-10-09"));//将指定日期转换成毫秒值
```

 - 获取日期中的制定部分
```
    getTime()  返回毫秒数和valueOf()结果一样
    getMilliseconds() :获取毫秒值
    getSeconds()  ：获取秒
    getMinutes()  ：获取分钟
    getHours()   :获取小时
    getDay()     ：获取星期，0-6    0：星期天
    getDate()    ：获取日，即当月的第几天
    getMonth()   ：返回月份，注意从0开始计算，0-11
    getFullYear()   ：返回4位的年份  如 2016
```

    yyyy-MM-dd HH:mm:ss
    
------

## DOM

### 1.1 基本概念
1.1.1 DOM

    DOM Document Object Model 文档对象模型
    就是把 HTML 文档模型化，当作对象来处理
    DOM提供的一系列属性和方法可以视作一个工具箱，极大地方便了我们对文档的处理

1.1.2 内容概念

 - 文档(Document)：指HTML 或者 XML 文件
 - 节点(Node)：HTML文档中的所有内容都可以称之为节点。常见节点有：元素节点，属性节点，文本节点，注释节点
 - 元素(Element)：HTML文档中的标签可以称为元素

1.1.3 结构概念
 
 - 父节点：当前节点的父级
 - 子节点：当前节点的子集
 - 兄弟节点：和当前节点同属一个父级的节点

### 1.2 获取元素

 **getElementById**：通过**id**寻找一个元素（找到的是一个元素对象）该方法只能被document对象调用（同一个文档中 id 不能重复）
 **getElementsByTagName**：通过**标签名**寻找一类元素（找到的是由元素对象组成的伪数组）既可以被 document 调用，又可以 被元素对象调用，被元素对象调用时表示在该元素对象内部执行查找
 
### 1.3 设置属性

    元素对象.属性名 = "属性值";
等价于

    <标签 属性名 = "属性值">;

### 1.4 绑定事件
 事件三要素

    事件源.事件 = function(){ 事件处理程序 }
    
等价于

    <标签 事件 = "事件处理程序">
    
**对象方法中的this永远指的是该方法所属的那个对象**

### 1.5 常用属性

1.5.1 常用标签属性

    Dom对象的属性和HTML的标签属性几乎是一致的，常用的有 src,title,className,href 和 style，其中 className 对应的就是标签的class属性，由于 class 在JS中是关键字，所以变成了className
    
1.5.2 内部文本属性

  **innerHTML**：获取和设置标签中的内容，设置的内容会当作节点对象被解析到DOM树上
  **innerText**：获取和设置标签中的内容，设置的内容会被当作普通文本（有兼容问题，旧版ff不支持）
  **textContent**：获取和设置标签中的内容，设置的内容会被当作普通文本（有兼容性问题，旧版IE不支持）
  
  **可以通过能力检测封装一个自己的设置内部文本的方法并放到自己的JS工具包中**
  
1.5.3 常用表单属性

    常见的表单元素属性有：type,value,checked,selected,disabled
    type：设置input元素的类型
    value：设置input元素的值
    checked：设置input元素是否选中
    selected：设置下拉列表select中option是否被选中
    disabled：可以设置input元素是否被禁用
    
    onfocus：文本框获取焦点事件
    onblur：文本框失去焦点事件
    
1.5.4 自定义属性
    
**对象的自定义属性**

    可以像给对象设置属性一样，给元素对象设置属性
    
**标签的自定义属性**

  - setAttribute():设置标签属性
  - getAttribute():获取标签属性
  - removeAttribute():移除标签的属性
  - 正常浏览器中 HTML 中有规定的属性，两种方式才可以相互设置和获取
  - 用对象的自定义属性设置，就用对象的自定义属性获取

### 1.6 节点

  1.6.1 节点类型

    node.nodeType
    1表示 元素节点
    2表示 属性节点
    3表示 文本节点
    
  1.6.2 节点层次
  
      所有获取节点相关属性都没有兼容性问题
      
  **childNodes**：子节点
  **children**：子元素（虽不是早期DOM标准中的方法，但所有浏览器都支持）
  
  **nextSibling**：下一个兄弟节点
  **nextElementSibling**：下一个兄弟元素 （有兼容性问题）
  **previousSibling**：上一个兄弟节点
  **previousElementSibling**：上一个兄弟元素（有兼容性问题）
  
  **firstChild**：第一个节点
  **firstElementChild**：第一个子元素（有兼容问题）
  **lastChild**：最后一个子节点
  **lastElementChild**：最后一个子元素（有兼容性问题）
  
  **parentNode**：父节点（一定是元素节点，所以无需处理）
  
### 1.7 样式属性

> style属性是对象，style对象的属性是字符串
  style 只能获取和设置行内样式
  
>  DOM对象中style的属性和标签中style内的值几乎一样
  只有带 **-** 的属性名较为特殊（如：background-color 变成 backgroundColor）,因为JS中 **-** 不能作为标识符
  
**设置和获取样式**

  - 通过对象的style属性只能设置和获取行内样式
  - 获取样式时，如果行内没有该样式，输出空字符串
  - 设置样式时，赋的值是一个字符串，若这个属性有单位，一定要节点加单位

**什么情况通过class控制样式，什么情况通过style控制样式**

 - 不严格的说：
  - 如果样式很多，通过直接控制类名的方式加样式
  - 如果样式比较少，通过直接设置比较方便
 
 - 严格来说：
  - 从标准角度讲，即使是样式比较少的时候，设置样式也要用类名
  - 但有一类情况，是无论如何也必须直接通过JS，那就是涉及到计算时
      
### 1.8 动态创建元素
  1.8.1 插入节点和移除节点

克隆节点:

    要克隆的节点.cloneNode(布尔值);
    
在父元素中的最后追加子元素：

    father.appendChild(要追加的节点对象);
    
在父元素中的某个子元素前面插入子元素：

    father.insertBefore(要插入的节点对象，插到这个节点对象的前面);
    
从父元素中移除子元素：

    father.removeChild(要移除的子节点对象);
    
清空父元素：

    father.innerHTML = ""; 这样在清空内容的时候和事件相关的函数不会被销毁，任然遗留在内存中，所以，建议用：father.removeChild(son) 来清除
    
1.8.2 动态创建结构
    
    方式一：直接在文档中书写
    document.write("内容");
    
    方式二：改变元素对象内部的HTML
    innerHTML = "内容";
    
    方式三：创建或克隆节点并追加
    createElement() 创建元素
    cloneNode()克隆节点
    通过这两种方式创建出来的元素只是保存在内存中，必须放到页面上才行。

    









### [Windows/Mac/Linux 全平台客户端](https://www.zybuluo.com/cmd/)


